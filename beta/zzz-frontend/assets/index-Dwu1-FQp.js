import{g as Ae,h as Ce,s as Pe,_ as W,r as p,i as De,k as Ie,l as Le,m as A,n as Ee,o as je,T as y,p as F,q as Ke,t as ce,v as le,d as o,w as Be,c as P,x as Oe,S as ze,F as de,y as Z,z as V,A as Te,D as ee,E as We,G as Fe,H as Ne,I as N,j as k,B as u,J as $e,C as R,e as C,K as q,L as Ge,M as pe,f as I,N as te,b as B,O as w,P as Ue,Q as Ve,R as ke,U as qe,V as He,W as he,X as $,Y as ae}from"./index-BfTjH_YO.js";import{T as Ye,b as Je,i as Xe,g as H,v as fe,S as be,D as Qe,c as Y,e as Ze,f as et,h as L,M,C as tt,j as G,k as at,l as st,L as nt,m as rt}from"./UploadCard-DBH2XnLR.js";import{u as me}from"./useForceUpdate-DOApKH99.js";function ot(e){return Ce("MuiInputAdornment",e)}const it=Ae("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),se=it;var ne;const _t=["children","className","component","disablePointerEvents","disableTypography","position","variant"],ct=(e,r)=>{const{ownerState:s}=e;return[r.root,r[`position${F(s.position)}`],s.disablePointerEvents===!0&&r.disablePointerEvents,r[s.variant]]},lt=e=>{const{classes:r,disablePointerEvents:s,hiddenLabel:n,position:t,size:a,variant:c}=e,_={root:["root",s&&"disablePointerEvents",t&&`position${F(t)}`,c,n&&"hiddenLabel",a&&`size${F(a)}`]};return Ke(_,ot,r)},dt=Pe("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:ct})(({theme:e,ownerState:r})=>W({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},r.variant==="filled"&&{[`&.${se.positionStart}&:not(.${se.hiddenLabel})`]:{marginTop:16}},r.position==="start"&&{marginRight:8},r.position==="end"&&{marginLeft:8},r.disablePointerEvents===!0&&{pointerEvents:"none"})),pt=p.forwardRef(function(r,s){const n=De({props:r,name:"MuiInputAdornment"}),{children:t,className:a,component:c="div",disablePointerEvents:_=!1,disableTypography:d=!1,position:b,variant:i}=n,l=Ie(n,_t),h=Le()||{};let g=i;i&&h.variant,h&&!g&&(g=h.variant);const v=W({},n,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:_,position:b,variant:g}),x=lt(v);return A.jsx(Ee.Provider,{value:null,children:A.jsx(dt,W({as:c,ownerState:v,className:je(x.root,a),ref:s},l,{children:typeof t=="string"&&!d?A.jsx(y,{color:"text.secondary",children:t}):A.jsxs(p.Fragment,{children:[b==="start"?ne||(ne=A.jsx("span",{className:"notranslate",children:"â€‹"})):null,t]})}))})}),re=pt;var J={},kt=le;Object.defineProperty(J,"__esModule",{value:!0});var ue=J.default=void 0,ht=kt(ce()),ft=A,bt=(0,ht.default)((0,ft.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");ue=J.default=bt;function mt(e){return o(Be,{placement:"top",...e,children:o(ue,{sx:{cursor:"help"}})})}function K({value:e,onChange:r,float:s=!1,...n}){const[t,a]=p.useState(e==null?void 0:e.toString()),{min:c,max:_}=(n==null?void 0:n.inputProps)??{};p.useEffect(()=>{a(e==null?void 0:e.toString())},[e]);const d=()=>{const l=s?t.replace(",","."):t;let h=s?parseFloat(l):parseInt(l);if(isNaN(h)&&(h=0,a(h.toString())),c!==void 0&&h<c){r(c),a(c.toString());return}if(_!==void 0&&h>_){r(_),a(_.toString());return}r(h)},b=l=>{const h=l.target.value;if(h.match(s?/[^0-9.,-]/:/[^0-9-]/))return l.preventDefault();a(h)},i=l=>{l.target.select()};return o(Ye,{value:t==null?void 0:t.toString(),onChange:b,onBlur:d,onFocus:i,onKeyDown:l=>l.key==="Enter"&&!n.multiline&&d(),...n,inputProps:{inputMode:"numeric",...n.inputProps??{}}})}function ge(e,r){const[s,n]=me(),t=p.useMemo(()=>s&&e.get(r),[s,e,r]);return p.useEffect(()=>e.follow(r,n),[e,r,n]),t}function X(e){const{database:r}=P();return ge(r.chars,e)}function ut(e){const{database:r}=P();return ge(r.discs,e??"")}function gt({wkey:e,setWKey:r,...s}){const n=p.useMemo(()=>[{key:"",label:"Select a Wengine"},...Oe.map(t=>({key:t,label:t}))],[]);return o(p.Suspense,{fallback:o(ze,{variant:"text",width:100}),children:o(Je,{size:"small",options:n,toImg:()=>o(de,{children:" "}),valueKey:e,onChange:t=>r(t??""),...s})})}function yt(e,r){const s={...e},n=t=>s[t]||0;for(const t of r)for(const a in t.stats)s[a]=n(a)+t.stats[a];for(const[t,a]of Object.entries(s))if(a>=2&&ee[t])for(const[c,_]of Object.entries(ee[t]))s[c]=n(c)+_;return s.initial_hp=n("hp_base")*(1+n("hp_"))+n("hp"),s.initial_atk=n("atk_base")*(1+n("atk_"))+n("atk"),s.initial_def=n("def_base")*(1+n("def_"))+n("def"),s.final_hp=n("initial_hp")*(1+n("cond_hp_"))+n("cond_hp"),s.final_atk=n("initial_atk")*(1+n("cond_atk_"))+n("cond_atk"),s.final_def=n("initial_def")*(1+n("cond_def_"))+n("cond_def"),s.impact=n("impact")*(1+n("impact_")),s.anomMas=n("anomMas")*(1+n("anomMas_")),s.crit_=We(s.crit_),s}({...Z(V,e=>r=>{const s=n=>r[n]||0;return s("final_atk")*(1+s(e)+s("dmg_"))*(1+s("crit_")*s("crit_dmg_"))*oe(s)*ie(s)}),...Z(Te,e=>r=>{const s=n=>r[n]||0;return xt[e]*s("final_atk")*(s("anomProf")*.01)*(1+1/59*(s("charLvl")-1))*(1+s(wt[e])+s("dmg_"))*oe(s)*ie(s)})});function oe(e){const r=St(e("charLvl"));return r/(Math.max(e("enemyDef")*(1-e("enemyDefRed_"))*(1-e("pen_"))-e("pen"),0)+r)}function ie(e){return 1-e("enemyRes_")+e("enemyResRed_")+e("enemyResIgn_")}function St(e){return vt[e]||794}const vt={1:50,2:54,3:58,4:62,5:66,6:71,7:76,8:82,9:88,10:94,11:100,12:107,13:114,14:121,15:129,16:137,17:145,18:153,19:162,20:172,21:181,22:191,23:201,24:211,25:222,26:233,27:245,28:256,29:268,30:281,31:293,32:306,33:319,34:333,35:347,36:361,37:375,38:390,39:405,40:421,41:436,42:452,43:469,44:485,45:502,46:519,47:537,48:555,49:573,50:592,51:610,52:629,53:649,54:669,55:689,56:709,57:730,58:751,59:772,60:794},wt={burn:"fire_dmg_",shock:"electric_dmg_",corruption:"ether_dmg_",shatter:"ice_dmg_",assault:"physical_dmg_"},xt={burn:.5,shock:1.25,corruption:.625,shatter:5,assault:7.13},Mt=5e4;function Rt(...e){const r={};return e.forEach(s=>Object.entries(s).forEach(([n,t])=>{r[n]=(r[n]??0)+t})),r}function At(e){const{id:r,mainStatKey:s,level:n,rarity:t,setKey:a,substats:c}=e;return{id:r,stats:{[s]:Fe(t,s),...Object.fromEntries(c.map(({key:_,upgrades:d})=>[_,Ne(_,t)*d])),[a]:1}}}class Ct{constructor(r,s,n,t,a,c){this.formulaKey=r,this.baseStats=s,this.constraints=n,this.discsBySlot=t,this.numWorkers=a,this.setProgress=c,this.worker=new Worker(new URL(""+new URL("parentWorker-1K1xv-qM.js",import.meta.url).href,import.meta.url),{type:"module"})}async optimize(){return await new Promise((s,n)=>{this.worker.onmessage=({data:a})=>{switch(a.resultType){case"progress":this.setProgress(a.progress);break;case"done":s(a.buildResults);break;case"err":console.error(a),n();break}};const t={baseStats:this.baseStats,command:"start",discsBySlot:this.discsBySlot,constraints:this.constraints,numWorkers:this.numWorkers,formulaKey:this.formulaKey};this.worker.postMessage(t)})}async terminate(){const r={command:"terminate"};this.worker.postMessage(r),await new Promise((s,n)=>{this.worker.onmessage=({data:t})=>{switch(t.resultType){case"terminated":s();break;case"err":console.error(t),n();break}}}),this.worker.terminate()}}const ye={Anby:{rarity:"A",element:"electric",stats:{atk_base:95,atk_growth:5.423,def_base:49,def_growth:6.6882,hp_base:603,hp_growth:81.8426,anomMas:94,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:414,atk:34,def:34},{hp:828,atk:68,def:68},{hp:1242,atk:102,def:101},{hp:1656,atk:135,def:135},{hp:2069,atk:169,def:169}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Nekomata:{rarity:"S",element:"physical",stats:{atk_base:131,atk_growth:7.9762,def_base:47,def_growth:6.4166,hp_base:608,hp_growth:82.4778,anomMas:97,anomProf:96},levelStats:[{hp:0,atk:0,def:0},{hp:417,atk:47,def:32},{hp:834,atk:94,def:65},{hp:1251,atk:140,def:97},{hp:1668,atk:187,def:130},{hp:2086,atk:234,def:162}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},Nicole:{rarity:"A",element:"ether",stats:{atk_base:93,atk_growth:5.3249,def_base:50,def_growth:6.7901,hp_base:655,hp_growth:88.8787,anomMas:90,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:449,atk:33,def:34},{hp:899,atk:67,def:69},{hp:1348,atk:100,def:103},{hp:1798,atk:133,def:137},{hp:2247,atk:167,def:172}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Soldier11:{rarity:"S",element:"fire",stats:{atk_base:128,atk_growth:7.7554,def_base:49,def_growth:6.6882,hp_base:617,hp_growth:83.7238,anomMas:94,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:423,atk:46,def:34},{hp:847,atk:91,def:68},{hp:1270,atk:137,def:101},{hp:1694,atk:183,def:135},{hp:2117,atk:228,def:169}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},Corin:{rarity:"A",element:"physical",stats:{atk_base:116,atk_growth:6.9346,def_base:49,def_growth:6.5864,hp_base:561,hp_growth:76.1177,anomMas:93,anomProf:96},levelStats:[{hp:0,atk:0,def:0},{hp:385,atk:41,def:33},{hp:770,atk:83,def:67},{hp:1155,atk:124,def:100},{hp:1540,atk:166,def:133},{hp:1925,atk:207,def:167}],coreStats:[{atk_base:0,crit_dmg_:.096},{atk_base:25,crit_dmg_:.096},{atk_base:25,crit_dmg_:.192},{atk_base:50,crit_dmg_:.192},{atk_base:50,crit_dmg_:.288},{atk_base:75,crit_dmg_:.288}]},Caesar:{rarity:"S",element:"physical",stats:{atk_base:101,atk_growth:5.8761,def_base:61,def_growth:8.218,hp_base:766,hp_growth:103.9361,anomMas:87,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:526,atk:38,def:42},{hp:1051,atk:76,def:83},{hp:1577,atk:113,def:125},{hp:2102,atk:151,def:166},{hp:2628,atk:189,def:208}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Billy:{rarity:"A",element:"physical",stats:{atk_base:113,atk_growth:6.7335,def_base:49,def_growth:6.6203,hp_base:555,hp_growth:75.3604,anomMas:92,anomProf:91},levelStats:[{hp:0,atk:0,def:0},{hp:381,atk:40,def:33},{hp:762,atk:81,def:67},{hp:1143,atk:121,def:100},{hp:1524,atk:162,def:134},{hp:1906,atk:202,def:167}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},Miyabi:{rarity:"S",element:"ice",stats:{atk_base:127,atk_growth:7.6728,def_base:49,def_growth:6.6203,hp_base:617,hp_growth:83.7238,anomMas:116,anomProf:148},levelStats:[{hp:0,atk:0,def:0},{hp:423,atk:45,def:33},{hp:847,atk:90,def:67},{hp:1270,atk:136,def:100},{hp:1694,atk:181,def:134},{hp:2117,atk:226,def:167}],coreStats:[{atk_base:0,anomProf:30},{atk_base:25,anomProf:30},{atk_base:25,anomProf:60},{atk_base:50,anomProf:60},{atk_base:50,anomProf:90},{atk_base:75,anomProf:90}]},Koleda:{rarity:"S",element:"fire",stats:{atk_base:106,atk_growth:6.2007,def_base:48,def_growth:6.4845,hp_base:653,hp_growth:88.6832,anomMas:97,anomProf:96},levelStats:[{hp:0,atk:0,def:0},{hp:448,atk:38,def:33},{hp:897,atk:76,def:66},{hp:1345,atk:113,def:98},{hp:1794,atk:151,def:131},{hp:2242,atk:189,def:164}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Anton:{rarity:"A",element:"electric",stats:{atk_base:114,atk_growth:6.7737,def_base:50,def_growth:6.7901,hp_base:580,hp_growth:78.7644,anomMas:86,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:398,atk:41,def:34},{hp:797,atk:81,def:69},{hp:1195,atk:122,def:103},{hp:1593,atk:163,def:137},{hp:1992,atk:203,def:172}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},Ben:{rarity:"A",element:"fire",stats:{atk_base:94,atk_growth:5.3574,def_base:58,def_growth:7.8989,hp_base:690,hp_growth:93.5856,anomMas:86,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:473,atk:34,def:40},{hp:947,atk:67,def:80},{hp:1420,atk:101,def:120},{hp:1893,atk:134,def:160},{hp:2366,atk:168,def:200}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Soukaku:{rarity:"A",element:"ice",stats:{atk_base:96,atk_growth:5.4887,def_base:48,def_growth:6.5185,hp_base:645,hp_growth:87.5757,anomMas:93,anomProf:96},levelStats:[{hp:0,atk:0,def:0},{hp:443,atk:34,def:33},{hp:886,atk:68,def:66},{hp:1329,atk:103,def:99},{hp:1772,atk:137,def:132},{hp:2214,atk:171,def:165}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Lycaon:{rarity:"S",element:"ice",stats:{atk_base:105,atk_growth:6.1287,def_base:49,def_growth:6.6203,hp_base:677,hp_growth:91.8185,anomMas:91,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:464,atk:37,def:33},{hp:929,atk:75,def:67},{hp:1393,atk:112,def:100},{hp:1857,atk:150,def:134},{hp:2322,atk:187,def:167}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Lucy:{rarity:"A",element:"fire",stats:{atk_base:95,atk_growth:5.423,def_base:49,def_growth:6.6882,hp_base:645,hp_growth:87.5757,anomMas:94,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:443,atk:34,def:34},{hp:886,atk:68,def:68},{hp:1329,atk:102,def:101},{hp:1772,atk:135,def:135},{hp:2214,atk:169,def:169}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Lighter:{rarity:"S",element:"fire",stats:{atk_base:109,atk_growth:6.3891,def_base:49,def_growth:6.6882,hp_base:677,hp_growth:91.8185,anomMas:91,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:432,atk:47,def:34},{hp:864,atk:95,def:68},{hp:1296,atk:142,def:101},{hp:1727,atk:190,def:135},{hp:2159,atk:237,def:169}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Burnice:{rarity:"S",element:"fire",stats:{atk_base:124,atk_growth:7.4992,def_base:48,def_growth:6.5524,hp_base:592,hp_growth:80.3931,anomMas:118,anomProf:120},levelStats:[{hp:0,atk:0,def:0},{hp:407,atk:44,def:33},{hp:813,atk:89,def:66},{hp:1220,atk:133,def:99},{hp:1626,atk:177,def:133},{hp:2033,atk:222,def:166}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Grace:{rarity:"S",element:"electric",stats:{atk_base:119,atk_growth:7.1181,def_base:48,def_growth:6.5524,hp_base:602,hp_growth:81.6391,anomMas:115,anomProf:116},levelStats:[{hp:0,atk:0,def:0},{hp:413,atk:42,def:33},{hp:826,atk:85,def:66},{hp:1239,atk:127,def:99},{hp:1651,atk:170,def:133},{hp:2064,atk:212,def:166}],coreStats:[{atk_base:0,anomMas:12},{atk_base:25,anomMas:12},{atk_base:25,anomMas:24},{atk_base:50,anomMas:24},{atk_base:50,anomMas:36},{atk_base:75,anomMas:36}]},Ellen:{rarity:"S",element:"ice",stats:{atk_base:135,atk_growth:8.2578,def_base:49,def_growth:6.6203,hp_base:617,hp_growth:83.7238,anomMas:94,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:423,atk:48,def:33},{hp:847,atk:96,def:67},{hp:1270,atk:145,def:100},{hp:1694,atk:193,def:134},{hp:2117,atk:241,def:167}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},Harumasa:{rarity:"S",element:"electric",stats:{atk_base:132,atk_growth:8.027,def_base:48,def_growth:6.5524,hp_base:595,hp_growth:80.8084,anomMas:80,anomProf:95},levelStats:[{hp:0,atk:0,def:0},{hp:409,atk:47,def:33},{hp:817,atk:94,def:66},{hp:1226,atk:141,def:99},{hp:1635,atk:188,def:133},{hp:2043,atk:235,def:166}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},Rina:{rarity:"S",element:"electric",stats:{atk_base:103,atk_growth:6.0201,def_base:48,def_growth:6.5524,hp_base:692,hp_growth:93.9358,anomMas:93,anomProf:92},levelStats:[{hp:0,atk:0,def:0},{hp:475,atk:37,def:33},{hp:950,atk:74,def:66},{hp:1425,atk:111,def:99},{hp:1900,atk:147,def:133},{hp:2375,atk:184,def:166}],coreStats:[{atk_base:0,pen_:.048},{atk_base:25,pen_:.048},{atk_base:25,pen_:.096},{atk_base:50,pen_:.096},{atk_base:50,pen_:.144},{atk_base:75,pen_:.144}]},Yanagi:{rarity:"S",element:"electric",stats:{atk_base:126,atk_growth:7.586,def_base:49,def_growth:6.6882,hp_base:626,hp_growth:84.9779,anomMas:112,anomProf:114},levelStats:[{hp:0,atk:0,def:0},{hp:430,atk:45,def:34},{hp:859,atk:90,def:68},{hp:1289,atk:134,def:101},{hp:1719,atk:179,def:135},{hp:2149,atk:224,def:169}],coreStats:[{atk_base:0,anomMas:12},{atk_base:25,anomMas:12},{atk_base:25,anomMas:24},{atk_base:50,anomMas:24},{atk_base:50,anomMas:36},{atk_base:75,anomMas:36}]},ZhuYuan:{rarity:"S",element:"ether",stats:{atk_base:132,atk_growth:8.0729,def_base:48,def_growth:6.5524,hp_base:602,hp_growth:81.6391,anomMas:93,anomProf:92},levelStats:[{hp:0,atk:0,def:0},{hp:413,atk:47,def:33},{hp:826,atk:95,def:66},{hp:1239,atk:142,def:99},{hp:1651,atk:189,def:133},{hp:2064,atk:236,def:166}],coreStats:[{atk_base:0,crit_dmg_:.096},{atk_base:25,crit_dmg_:.096},{atk_base:25,crit_dmg_:.192},{atk_base:50,crit_dmg_:.192},{atk_base:50,crit_dmg_:.288},{atk_base:75,crit_dmg_:.288}]},QingYi:{rarity:"S",element:"electric",stats:{atk_base:109,atk_growth:6.4272,def_base:49,def_growth:6.6882,hp_base:663,hp_growth:90.0269,anomMas:94,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:455,atk:39,def:34},{hp:911,atk:78,def:68},{hp:1366,atk:117,def:101},{hp:1821,atk:156,def:135},{hp:2276,atk:195,def:169}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Jane:{rarity:"S",element:"physical",stats:{atk_base:127,atk_growth:7.6728,def_base:49,def_growth:6.6203,hp_base:626,hp_growth:84.9779,anomMas:112,anomProf:114},levelStats:[{hp:0,atk:0,def:0},{hp:430,atk:45,def:33},{hp:859,atk:90,def:67},{hp:1289,atk:136,def:100},{hp:1719,atk:181,def:134},{hp:2149,atk:226,def:167}],coreStats:[{atk_base:0,anomMas:12},{atk_base:25,anomMas:12},{atk_base:25,anomMas:24},{atk_base:50,anomMas:24},{atk_base:50,anomMas:36},{atk_base:75,anomMas:36}]},Seth:{rarity:"A",element:"electric",stats:{atk_base:93,atk_growth:5.2593,def_base:60,def_growth:8.1379,hp_base:699,hp_growth:94.9375,anomMas:86,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:480,atk:33,def:41},{hp:960,atk:66,def:82},{hp:1440,atk:99,def:123},{hp:1920,atk:132,def:165},{hp:2401,atk:165,def:206}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Piper:{rarity:"A",element:"physical",stats:{atk_base:109,atk_growth:6.4308,def_base:49,def_growth:6.6882,hp_base:561,hp_growth:76.1177,anomMas:116,anomProf:118},levelStats:[{hp:0,atk:0,def:0},{hp:385,atk:39,def:34},{hp:770,atk:78,def:68},{hp:1155,atk:117,def:101},{hp:1540,atk:156,def:135},{hp:1925,atk:195,def:169}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Astra:{rarity:"S",element:"ether",stats:{atk_base:103,atk_growth:5.9961,def_base:48,def_growth:6.5524,hp_base:692,hp_growth:93.9358,anomMas:93,anomProf:92},levelStats:[{hp:0,atk:0,def:0},{hp:475,atk:37,def:33},{hp:950,atk:74,def:66},{hp:1425,atk:110,def:99},{hp:1900,atk:147,def:133},{hp:2375,atk:184,def:166}],coreStats:[{atk_base:0,base_enerRegen:12},{atk_base:25,base_enerRegen:12},{atk_base:25,base_enerRegen:24},{atk_base:50,base_enerRegen:24},{atk_base:50,base_enerRegen:36},{atk_base:75,base_enerRegen:36}]},Evelyn:{rarity:"S",element:"fire",stats:{atk_base:134,atk_growth:8.1654,def_base:49,def_growth:6.6882,hp_base:626,hp_growth:84.9779,anomMas:92,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:430,atk:48,def:34},{hp:859,atk:95,def:68},{hp:1289,atk:143,def:101},{hp:1719,atk:191,def:135},{hp:2149,atk:239,def:169}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]},PulchraFeliny:{rarity:"A",element:"physical",stats:{atk_base:96,atk_growth:5.4887,def_base:49,def_growth:6.6203,hp_base:612,hp_growth:83.0642,anomMas:92,anomProf:90},levelStats:[{hp:0,atk:0,def:0},{hp:420,atk:34,def:33},{hp:840,atk:68,def:67},{hp:1260,atk:103,def:100},{hp:1680,atk:137,def:134},{hp:2100,atk:171,def:167}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},Trigger:{rarity:"S",element:"electric",stats:{atk_base:108,atk_growth:6.3517,def_base:48,def_growth:6.5524,hp_base:637,hp_growth:86.4437,anomMas:96,anomProf:95},levelStats:[{hp:0,atk:0,def:0},{hp:437,atk:39,def:33},{hp:874,atk:77,def:66},{hp:1311,atk:116,def:99},{hp:1749,atk:154,def:133},{hp:2186,atk:193,def:166}],coreStats:[{atk_base:0,impact:6},{atk_base:25,impact:6},{atk_base:25,impact:12},{atk_base:50,impact:12},{atk_base:50,impact:18},{atk_base:75,impact:18}]},SilverAnby:{rarity:"S",element:"electric",stats:{atk_base:134,atk_growth:8.1654,def_base:49,def_growth:6.6882,hp_base:617,hp_growth:83.7238,anomMas:94,anomProf:93},levelStats:[{hp:0,atk:0,def:0},{hp:423,atk:48,def:34},{hp:847,atk:95,def:68},{hp:1270,atk:143,def:101},{hp:1694,atk:191,def:135},{hp:2117,atk:239,def:169}],coreStats:[{atk_base:0,crit_:.048},{atk_base:25,crit_:.048},{atk_base:25,crit_:.096},{atk_base:50,crit_:.096},{atk_base:50,crit_:.144},{atk_base:75,crit_:.144}]}},Se={LunarPleniluna:{type:"attack",atk_base:32,second_statkey:"atk_",second_statvalue:.08},LunarDecrescent:{type:"attack",atk_base:32,second_statkey:"atk_",second_statvalue:.08},LunarNoviluna:{type:"attack",atk_base:32,second_statkey:"crit_",second_statvalue:.064},ReverbMarkI:{type:"support",atk_base:32,second_statkey:"atk_",second_statvalue:.08},ReverbMarkII:{type:"support",atk_base:32,second_statkey:"enerRegen_",second_statvalue:.16},ReverbMarkIII:{type:"support",atk_base:32,second_statkey:"hp_",second_statvalue:.08},VortexRevolver:{type:"stun",atk_base:32,second_statkey:"atk_",second_statvalue:.08},VortexArrow:{type:"stun",atk_base:32,second_statkey:"impact_",second_statvalue:.048},VortexHatchet:{type:"stun",atk_base:32,second_statkey:"enerRegen_",second_statvalue:.16},MagneticStormAlpha:{type:"anomaly",atk_base:32,second_statkey:"atk_",second_statvalue:.08},MagneticStormBravo:{type:"anomaly",atk_base:32,second_statkey:"anomProf",second_statvalue:24},MagneticStormCharlie:{type:"anomaly",atk_base:32,second_statkey:"pen_",second_statvalue:.064},IdentityBase:{type:"defense",atk_base:32,second_statkey:"def_",second_statvalue:.128},IdentityInflection:{type:"defense",atk_base:32,second_statkey:"def_",second_statvalue:.128},StreetSuperstar:{rarity:"A",type:"attack",atk_base:40,second_statkey:"atk_",second_statvalue:.1},SliceOfTime:{rarity:"A",type:"support",atk_base:40,second_statkey:"pen_",second_statvalue:.08},RainforestGourmet:{rarity:"A",type:"anomaly",atk_base:40,second_statkey:"anomProf",second_statvalue:30},StarlightEngine:{rarity:"A",type:"attack",atk_base:40,second_statkey:"atk_",second_statvalue:.1},SteamOven:{rarity:"A",type:"stun",atk_base:40,second_statkey:"enerRegen_",second_statvalue:.2},PreciousFossilizedCore:{rarity:"A",type:"stun",atk_base:40,second_statkey:"impact_",second_statvalue:.06},OriginalTransmorpher:{rarity:"A",type:"defense",atk_base:40,second_statkey:"hp_",second_statvalue:.1},WeepingGemini:{rarity:"A",type:"anomaly",atk_base:40,second_statkey:"atk_",second_statvalue:.1},ElectroLipGloss:{rarity:"A",type:"anomaly",atk_base:40,second_statkey:"anomProf",second_statvalue:30},BunnyBand:{rarity:"A",type:"defense",atk_base:40,second_statkey:"def_",second_statvalue:.16},SpringEmbrace:{rarity:"A",type:"defense",atk_base:40,second_statkey:"atk_",second_statvalue:.1},GildedBlossom:{rarity:"A",type:"attack",atk_base:40,second_statkey:"atk_",second_statvalue:.1},MarcatoDesire:{rarity:"A",type:"attack",atk_base:40,second_statkey:"crit_",second_statvalue:.08},DemaraBatteryMarkII:{rarity:"A",type:"stun",atk_base:42,second_statkey:"impact_",second_statvalue:.06},TheVault:{rarity:"A",type:"support",atk_base:42,second_statkey:"enerRegen_",second_statvalue:.2},Housekeeper:{rarity:"A",type:"attack",atk_base:42,second_statkey:"atk_",second_statvalue:.1},StarlightEngineReplica:{rarity:"A",type:"attack",atk_base:42,second_statkey:"atk_",second_statvalue:.1},DrillRigRedAxis:{rarity:"A",type:"attack",atk_base:42,second_statkey:"enerRegen_",second_statvalue:.2},BigCylinder:{rarity:"A",type:"defense",atk_base:42,second_statkey:"def_",second_statvalue:.16},BashfulDemon:{rarity:"A",type:"support",atk_base:42,second_statkey:"atk_",second_statvalue:.1},KaboomTheCannon:{rarity:"A",type:"support",atk_base:42,second_statkey:"enerRegen_",second_statvalue:.2},PeacekeeperSpecialized:{rarity:"A",type:"defense",atk_base:42,second_statkey:"atk_",second_statvalue:.1},RoaringRide:{rarity:"A",type:"anomaly",atk_base:42,second_statkey:"atk_",second_statvalue:.1},CannonRotor:{rarity:"A",type:"attack",atk_base:40,second_statkey:"crit_",second_statvalue:.08},UnfetteredGameBall:{rarity:"A",type:"support",atk_base:40,second_statkey:"enerRegen_",second_statvalue:.2},SixShooter:{rarity:"A",type:"stun",atk_base:40,second_statkey:"impact_",second_statvalue:.06},SteelCushion:{rarity:"S",type:"attack",atk_base:46,second_statkey:"crit_",second_statvalue:.096},TheBrimstone:{rarity:"S",type:"attack",atk_base:46,second_statkey:"atk_",second_statvalue:.12},TusksOfFury:{rarity:"S",type:"defense",atk_base:48,second_statkey:"impact_",second_statvalue:.072},HailstormShrine:{rarity:"S",type:"anomaly",atk_base:50,second_statkey:"crit_",second_statvalue:.096},HellfireGears:{rarity:"S",type:"stun",atk_base:46,second_statkey:"impact_",second_statvalue:.072},TheRestrained:{rarity:"S",type:"stun",atk_base:46,second_statkey:"impact_",second_statvalue:.072},BlazingLaurel:{rarity:"S",type:"stun",atk_base:48,second_statkey:"impact_",second_statvalue:.072},FlamemakerShaker:{rarity:"S",type:"anomaly",atk_base:48,second_statkey:"atk_",second_statvalue:.12},FusionCompiler:{rarity:"S",type:"anomaly",atk_base:46,second_statkey:"pen_",second_statvalue:.096},DeepSeaVisitor:{rarity:"S",type:"attack",atk_base:48,second_statkey:"crit_",second_statvalue:.096},ZanshinHerbCase:{rarity:"S",type:"attack",atk_base:48,second_statkey:"crit_dmg_",second_statvalue:.192},WeepingCradle:{rarity:"S",type:"support",atk_base:46,second_statkey:"pen_",second_statvalue:.096},Timeweaver:{rarity:"S",type:"anomaly",atk_base:48,second_statkey:"atk_",second_statvalue:.12},RiotSuppressorMarkVI:{rarity:"S",type:"attack",atk_base:48,second_statkey:"crit_dmg_",second_statvalue:.192},IceJadeTeapot:{rarity:"S",type:"stun",atk_base:48,second_statkey:"impact_",second_statvalue:.072},SharpenedStinger:{rarity:"S",type:"anomaly",atk_base:48,second_statkey:"anomProf",second_statvalue:36},ElegantVanity:{rarity:"S",type:"support",atk_base:48,second_statkey:"atk_",second_statvalue:.12},HeartstringNocturne:{rarity:"S",type:"attack",atk_base:48,second_statkey:"crit_",second_statvalue:.096}},Pt={char:ye,wengine:Se},Dt=Object.freeze(Object.defineProperty({__proto__:null,char:ye,default:Pt,wengine:Se},Symbol.toStringTag,{value:"Module"})),ve=Dt;function It(e){return ve.char[e]}function Lt(e,r,s){const{levelStats:n,coreStats:t,stats:{atk_base:a,atk_growth:c,def_base:_,def_growth:d,hp_base:b,hp_growth:i,anomMas:l,anomProf:h}}=It(e),g={charLvl:r,crit_:.05,crit_dmg_:.5,anomMas:l,anomProf:h,atk_base:a+c*(r-1)+n[Math.floor(r/10)-1].atk,def_base:_+d*(r-1)+n[Math.floor(r/10)-1].def,hp_base:b+i*(r-1)+n[Math.floor(r/10)-1].hp};return s>1&&t[s-1]&&Object.entries(t[s-1]).forEach(([v,x])=>{g[v]=(g[v]||0)+x}),g}function Et(e){return ve.wengine[e]}function jt(e,r){const{atk_base:s,second_statkey:n,second_statvalue:t}=Et(e),a=N(Math.floor(r/10),0,5);return{atk_base:s*(1+Kt[r]/1e4+.8922*a),[n]:t*(1+.3*a)}}const Kt=[0,1568,3136,4705,6273,7841,9409,10977,12545,14114,15682,17250,18818,20386,21954,23523,25091,26659,28227,29795,31363,32932,34500,36068,37636,39204,40772,42341,43909,45477,47045,48613,50181,51750,53318,54886,56454,58022,59590,61159,62727,64295,65863,67431,68999,70568,72136,73704,75272,76840,78408,79977,81545,83113,84681,86249,87817,89386,90954,92522,94090],Bt=["hp_base","atk_base","def_base"],Ot=["hp","atk","def","hp_","atk_","def_","crit_","crit_dmg_",...V,"dmg_","impact","anomMas","anomProf","pen_","pen"],zt=["enemyDef","enemyDefRed_","enemyRes_","enemyResRed_","enemyResIgn_"];function Tt({locationKey:e,baseStats:r,setBaseStats:s}){const n=t=>o(K,{disabled:!e,sx:{flexGrow:1},value:r[t]||0,onChange:a=>s({...r,[t]:a}),float:Xe(t),inputProps:{sx:{textAlign:"right",minWidth:"5em"}},InputProps:{startAdornment:q[t]??t,endAdornment:H(t)}},t);return o(C,{children:k(R,{children:[o(y,{children:"BONUS Character Base Stats"}),o(u,{sx:{display:"flex",gap:1,pb:2,flexWrap:"wrap"},children:Bt.map(t=>n(t))}),o(y,{children:"BONUS Character Stats"}),o(u,{sx:{display:"flex",gap:1,pb:2,flexWrap:"wrap"},children:Ot.map(t=>n(t))}),o(y,{children:"Enemy Stats"}),o(u,{sx:{display:"flex",gap:1,pb:2,flexWrap:"wrap"},children:zt.map(t=>n(t))}),o(y,{children:"Combat Buffs(Conditonal)"}),o(u,{sx:{display:"flex",gap:1,pb:2,flexWrap:"wrap"},children:$e.map(t=>n(t))})]})})}function U({stats:e,showBase:r=!1}){return o(u,{sx:{columnCount:2},children:Object.entries(e).filter(([s])=>r||!s.endsWith("_base")).map(([s,n])=>k(y,{children:[q[s]??s,": ",fe(n,H(s))]},s))})}function Wt({location:e,builds:r,stats:s}){return o(be,{spacing:1,children:r.map((n,t)=>o(Ft,{locationKey:e,index:t,build:n,baseStats:s},`${t}_${n.value}`))})}function Ft({locationKey:e,index:r,build:s,baseStats:n}){const{database:t}=P(),a=p.useMemo(()=>yt(n,Object.values(s.discIds).map(_=>t.discs.get(_)).filter(Ge).map(At)),[n,s.discIds,t.discs]),c=p.useCallback(()=>{Object.values(s.discIds).forEach(_=>{t.discs.set(_,{location:e})})},[t.discs,e,s.discIds]);return o(C,{children:k(R,{children:[k(u,{sx:{display:"flex",gap:1},children:[o(y,{children:o(pe,{children:r+1})}),k(y,{sx:{flexGrow:1},children:["Calculated Value: ",o("strong",{children:fe(s.value)})]}),k(I,{size:"small",disabled:!e,onClick:c,children:["Equip to ",e]})]}),o(U,{stats:a}),o(u,{display:"flex",gap:1,children:Object.values(s.discIds).map(_=>o(Nt,{discId:_},_))})]})})}function Nt({discId:e}){const{database:r}=P(),s=ut(e);if(s)return o(Qe,{disc:s,setLocation:n=>r.discs.set(e,{location:n})})}var Q={},$t=le;Object.defineProperty(Q,"__esModule",{value:!0});var we=Q.default=void 0,Gt=$t(ce()),Ut=A,Vt=(0,Gt.default)((0,Ut.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");we=Q.default=Vt;const qt=p.memo(function({locationKey:r,disabled:s=!1}){const{database:n}=P(),t=X(r);return k(C,{bgt:"light",children:[o(R,{sx:{display:"flex",gap:1},children:o(y,{sx:{fontWeight:"bold"},children:"Artifact Level Filter"})}),o(Y,{}),o(Ht,{levelLow:(t==null?void 0:t.levelLow)??15,levelHigh:(t==null?void 0:t.levelHigh)??15,setLow:a=>t&&n.chars.set(t.key,{levelLow:a}),setHigh:a=>t&&n.chars.set(t.key,{levelHigh:a}),setBoth:(a,c)=>t&&n.chars.set(t.key,{levelLow:a,levelHigh:c}),disabled:s||!t})]})});function Ht({levelLow:e,levelHigh:r,setLow:s,setHigh:n,setBoth:t,dark:a=!1,disabled:c=!1}){const[_,d]=p.useState(e),[b,i]=p.useState(r),l=p.useCallback((h,g)=>{if(typeof g=="number")throw new TypeError;const[v,x]=g;d(v),i(x)},[d,i]);return p.useEffect(()=>d(e),[d,e]),p.useEffect(()=>i(r),[i,r]),k(u,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:a?"contentNormal.main":"contentLight.main",overflow:"visible"},children:[o(u,{sx:{width:"max-content",height:32,display:"flex"},children:o(te,{value:_,onChange:h=>s(N(h??0,0,r)),sx:{px:1,width:"3em"},inputProps:{sx:{textAlign:"center"}},disabled:c})}),o(Ze,{sx:{flex:"0 1 100%",mx:2},getAriaLabel:()=>"Arifact Level Range",value:[_,b],onChange:l,onChangeCommitted:(h,g)=>Array.isArray(g)&&t(g[0],g[1]),valueLabelDisplay:"auto",min:0,max:15,step:1,marks:!0,disabled:c}),o(te,{value:b,onChange:h=>n(N(h??0,e,15)),sx:{px:1,flex:"0 0 3em"},inputProps:{sx:{textAlign:"center"}},disabled:c})]})}const Yt=["hp","def","atk","crit_","crit_dmg_","anomProf","pen",...V];function Jt({constraints:e,setConstraints:r,disabled:s=!1}){const{t:n}=B("page_character_optimize");return o(u,{children:k(C,{bgt:"light",children:[o(R,{sx:{display:"flex",gap:1,justifyContent:"space-between",flexDirection:"column"},children:k(u,{display:"flex",justifyContent:"space-between",children:[o(y,{sx:{fontWeight:"bold"},children:n("constraintFilter.title")}),o(mt,{title:o(y,{children:n("constraintFilter.tooltip")})})]})}),o(Y,{}),o(R,{children:k(be,{spacing:1,children:[Object.entries(e).filter(([t])=>!w.includes(t)).map(([t,{value:a,isMax:c}])=>k(u,{display:"flex",gap:1,children:[o(K,{value:a,onChange:_=>r({...e,[t]:{value:_,isMax:c}}),inputProps:{sx:{textAlign:"right"}},InputProps:{startAdornment:t,endAdornment:H(t)}}),k(Ue,{size:"small",children:[o(I,{onClick:()=>r({...e,[t]:{value:a,isMax:!c}}),children:c?"MAX":"MIN"}),o(I,{onClick:()=>{const{[t]:_,...d}=e;r({...d})},children:o(et,{})})]})]},t)),o(L,{disabled:s,title:"Add new Constraint",children:Yt.filter(t=>!Object.keys(e).includes(t)).map(t=>o(M,{onClick:()=>r({...e,[t]:{value:0,isMax:!1}}),children:q[t]??t},t))})]})})]})})}function Xt({numWorkers:e,setNumWorkers:r}){const{t:s}=B("optimize"),n=navigator.hardwareConcurrency||8;return o(L,{title:`${s("numWorkers")}: ${e}`,children:Ve(1,n).map(t=>k(M,{onClick:()=>r(t),children:[t," Workers"]},t))})}function Qt({formulaKey:e,location:r,baseStats:s,setResults:n}){const{t}=B("optimize"),{database:a}=P(),[c,_]=p.useState(8),[d,b]=p.useState(void 0),i=X(r);p.useEffect(()=>{b(void 0)},[i]);const l=p.useCallback(m=>{i&&a.chars.set(i.key,{constraints:m})},[a,i]),[h,g]=me();p.useEffect(()=>a.discs.followAny(g),[a.discs,g]);const v=p.useMemo(()=>h&&a.discs.values.reduce((m,f)=>(!i||f.level<i.levelLow||f.level>i.levelHigh||f.location&&!i.useEquipped&&f.location!==r||f.slotKey==="4"&&!i.slot4.includes(f.mainStatKey)||f.slotKey==="5"&&!i.slot5.includes(f.mainStatKey)||f.slotKey==="6"&&!i.slot6.includes(f.mainStatKey)||m[f.slotKey].push(f),m),{1:[],2:[],3:[],4:[],5:[],6:[]}),[h,a.discs.values,r,i]),x=p.useMemo(()=>Object.values(v).reduce((m,f)=>m*f.length,1),[v]),[j,O]=p.useState(!1),E=p.useRef(()=>{});p.useEffect(()=>()=>E.current(),[]);const xe=p.useCallback(async()=>{if(!i)return;const m=new Promise(S=>E.current=S);n([]),b(void 0),O(!0);const f=new Ct(e,s,ke(i.constraints,(S,Re)=>({...S,value:he(S.value,Re)})),v,c,b);m.then(async()=>await f.terminate());const T=await f.optimize();await f.terminate(),E.current=()=>{},O(!1),n(T)},[s,i,v,e,c,n]),Me=p.useCallback(()=>{E.current(),O(!1)},[E]),D=m=>k(y,{children:["Disc ",m," ",o(pe,{children:v[m].length})]}),z=m=>{const f={4:(i==null?void 0:i.slot4)??[],5:(i==null?void 0:i.slot5)??[],6:(i==null?void 0:i.slot6)??[]},T={4:S=>i&&a.chars.set(i.key,{slot4:S}),5:S=>i&&a.chars.set(i.key,{slot5:S}),6:S=>i&&a.chars.set(i.key,{slot6:S})};return o(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:qe[m].map(S=>o(I,{disabled:!i,variant:f[m].includes(S)?"contained":"outlined",onClick:()=>T[m](He([...f[m]],S)),children:o(st,{statKey:S,showPercent:!0})},S))})};return k(C,{children:[o(tt,{title:t("optimize")}),o(Y,{}),o(R,{children:k(G,{spacing:1,children:[o(qt,{locationKey:r}),o(C,{bgt:"light",children:o(R,{children:k(G,{spacing:1,children:[k(u,{sx:{display:"flex",justifyContent:"space-between"},children:[D("1"),D("2"),D("3")]}),D("4"),z("4"),D("5"),z("5"),D("6"),z("6")]})})}),o(Jt,{disabled:!i,constraints:(i==null?void 0:i.constraints)??{},setConstraints:l}),o(ea,{disabled:!i,constraints:(i==null?void 0:i.constraints)??{},setConstraints:l}),o(y,{children:"NOTE: the solver currently accounts for 2-set effects only."}),o(I,{disabled:!i,onClick:()=>i&&a.chars.set(i.key,{useEquipped:!i.useEquipped}),variant:i!=null&&i.useEquipped?"contained":"outlined",children:"Use equipped Discs"}),k(u,{sx:{display:"flex",gap:1},children:[o(Xt,{numWorkers:c,setNumWorkers:_}),o(I,{sx:{flexGrow:1},onClick:j?Me:xe,color:j?"error":"success",startIcon:j?o(at,{}):o(we,{}),disabled:!x||!r,children:t(j?"cancel":"optimize")})]}),d&&o(Zt,{progress:d,totalPermutations:x})]})})]})}function Zt({progress:e,totalPermutations:r}){const{t:s}=B("optimize");return k(u,{children:[k(y,{children:[s("totalProgress"),": ",e.numBuildsComputed.toLocaleString()," /"," ",r.toLocaleString()]}),k(y,{children:[s("buildsKept"),": ",e.numBuildsKept.toLocaleString()," /"," ",Mt.toLocaleString()]}),o(nt,{variant:"determinate",value:e.numBuildsComputed/r*100})]})}function ea({disabled:e=!1,constraints:r,setConstraints:s}){var a,c;const n=(a=Object.entries(r).find(([_,{value:d}])=>w.includes(_)&&d===4))==null?void 0:a[0],t=(c=Object.entries(r).find(([_,{value:d}])=>w.includes(_)&&d===2))==null?void 0:c[0];return k(de,{children:[k(L,{disabled:e,title:n?k("span",{children:["Force 4-Set: ",o("strong",{children:n})]}):"Select to force 4-Set",sx:{flexGrow:1},children:[o(M,{onClick:()=>s(Object.fromEntries(Object.entries(r).filter(([_,{value:d}])=>!(w.includes(_)&&d===4)))),children:"No 4-Set"}),w.map(_=>o(M,{onClick:()=>s({...Object.fromEntries(Object.entries(r).filter(([d,{value:b}])=>!(w.includes(d)&&b===4))),[_]:{value:4,isMax:!1}}),children:_},_))]}),k(L,{disabled:e,title:t?k("span",{children:["Force 2-Set: ",o("strong",{children:t})]}):"Select to force 2-Set",sx:{flexGrow:1},children:[o(M,{onClick:()=>s(Object.fromEntries(Object.entries(r).filter(([_,{value:d}])=>!(w.includes(_)&&d===2)))),children:"No 2-Set"}),w.map(_=>o(M,{onClick:()=>s({...Object.fromEntries(Object.entries(r).filter(([d,{value:b}])=>!(w.includes(d)&&b===2))),[_]:{value:2,isMax:!1}}),children:_},_))]})]})}function ta({disabled:e=!1,formulaKey:r,setFormulaKey:s}){return o(L,{disabled:e,fullWidth:!0,title:k("span",{children:["Optimize Target: ",o("strong",{children:_e[r]})]}),sx:{flexGrow:1},children:$.map(n=>o(M,{onClick:()=>s(n),children:_e[n]},n))})}const _e={initial_atk:"Initial ATK",electric_dmg_:"Electrical Damage",fire_dmg_:"Fire Damage",ice_dmg_:"Ice Damage",physical_dmg_:"Physical Damage",ether_dmg_:"Ether Damage",burn:"Burn Anomaly",shock:"Shock Anomaly",corruption:"Corruption Anomaly",shatter:"Shatter Anomaly",assault:"Assault Anomaly"};function ra(){const{database:e}=P(),[r,s]=p.useState([]),[n,t]=p.useState(""),a=X(n);!a&&n&&e.chars.getOrCreate(n);const c=p.useCallback(l=>{a&&e.chars.set(a.key,{stats:l})},[a,e.chars]),_=p.useMemo(()=>{if(a)return Lt(a.key,a.level,a.core)},[a]),d=p.useMemo(()=>{if(a)return jt(a.wengineKey,a.wengineLvl)},[a]),b=p.useMemo(()=>a?Rt(_??{},d??{},ke(a.stats,(l,h)=>he(l,h))):{},[_,a,d]),i=p.useCallback(l=>{a&&e.chars.set(a.key,{formulaKey:l})},[a,e.chars]);return k(u,{display:"flex",flexDirection:"column",gap:1,my:1,children:[o(C,{children:o(R,{children:k(G,{spacing:1,children:[o(y,{variant:"h6",children:"Character"}),k(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[o(rt,{locKey:n,setLocKey:l=>{t(l),s([])},sx:{flexGrow:1},autoFocus:!0}),o(K,{disabled:!a,value:(a==null?void 0:a.level)??60,onChange:l=>l!==void 0&&a&&e.chars.set(a.key,{level:l}),size:"small",inputProps:{sx:{width:"2ch"},max:60,min:1},InputProps:{startAdornment:o(re,{position:"start",children:"Lv."})}}),o(L,{title:`Core: ${ae[(a==null?void 0:a.core)??0]}`,disabled:!a,children:ae.map((l,h)=>o(M,{onClick:()=>a&&e.chars.set(a.key,{core:h}),children:l},l))})]}),_&&o(U,{stats:_,showBase:!0}),o(ta,{disabled:!a,formulaKey:(a==null?void 0:a.formulaKey)??$[0],setFormulaKey:i}),o(y,{variant:"h6",children:"Wengine"}),k(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[o(gt,{disabled:!a,wkey:(a==null?void 0:a.wengineKey)??"",setWKey:l=>l&&a&&e.chars.set(a.key,{wengineKey:l}),sx:{flexGrow:1},autoFocus:!0}),o(K,{disabled:!a,value:(a==null?void 0:a.wengineLvl)??60,onChange:l=>l!==void 0&&a&&e.chars.set(a.key,{wengineLvl:l}),size:"small",inputProps:{sx:{width:"2ch"},max:60,min:1},InputProps:{startAdornment:o(re,{position:"start",children:"Lv."})}})]}),d&&o(U,{stats:d,showBase:!0})]})})}),o(Tt,{locationKey:n,baseStats:(a==null?void 0:a.stats)??{},setBaseStats:c}),o(Qt,{setResults:s,baseStats:b,location:n,formulaKey:(a==null?void 0:a.formulaKey)??$[0]}),o(Wt,{builds:r,stats:b,location:n})]})}export{ra as default};
